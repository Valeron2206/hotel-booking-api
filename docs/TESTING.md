# –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Hotel Booking API

## üìö –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üéØ –¶–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏](#-—Ü–µ–ª—å-–ø—Ä–æ–≤–µ—Ä–∫–∏)
- [üöÄ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
- [üìã –¢–ï–°–¢ 1: –°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ –≤ –æ—Ç–µ–ª–µ](#-—Ç–µ—Å—Ç-1-—Å–ø–∏—Å–æ–∫-–Ω–æ–º–µ—Ä–æ–≤-–≤-–æ—Ç–µ–ª–µ)
- [üîç –¢–ï–°–¢ 2: –ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –Ω–∞ –ø–µ—Ä–∏–æ–¥](#-—Ç–µ—Å—Ç-2-–ø–æ–∏—Å–∫-—Å–≤–æ–±–æ–¥–Ω—ã—Ö-–Ω–æ–º–µ—Ä–æ–≤-–Ω–∞-–ø–µ—Ä–∏–æ–¥)
- [üìù –¢–ï–°–¢ 3: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ (–æ–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)](#-—Ç–µ—Å—Ç-3-–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-–Ω–æ–º–µ—Ä–∞-–æ–±—ã—á–Ω—ã–π-–∫–ª–∏–µ–Ω—Ç)
- [‚≠ê –¢–ï–°–¢ 4: VIP –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º API](#-—Ç–µ—Å—Ç-4-vip-–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-—Å-–≤–Ω–µ—à–Ω–∏–º-api)
- [üõ°Ô∏è –¢–ï–°–¢ 5: –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è](#Ô∏è-—Ç–µ—Å—Ç-5-–∑–∞—â–∏—Ç–∞-–æ—Ç-–¥–≤–æ–π–Ω–æ–≥–æ-–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- [‚ùå –¢–ï–°–¢ 6: –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è](#-—Ç–µ—Å—Ç-6-–æ—Ç–º–µ–Ω–∞-–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- [üìä –¢–ï–°–¢ 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏](#-—Ç–µ—Å—Ç-7-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-—Ñ—É–Ω–∫—Ü–∏–∏)
- [üåê –¢–ï–°–¢ 8: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç-8-–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–≤–µ—Ä–∫–∏

–î–∞–Ω–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è:
- –°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ –≤ –æ—Ç–µ–ª–µ ‚úÖ
- –ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –Ω–∞ –ø–µ—Ä–∏–æ–¥ ‚úÖ
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ ‚úÖ
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
- VIP —Å—Ç–∞—Ç—É—Å —Å –≤–Ω–µ—à–Ω–∏–º API ‚úÖ
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ

---

## üöÄ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### 1. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
```bash
docker-compose up -d --build
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# Health check (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å {"status":"ok"})
curl http://localhost:3000/health
```

### 3. –û—Ç–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **Swagger UI**: http://localhost:3000/api-docs (–¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- **pgAdmin**: http://localhost:5050 (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö)

---

## üìã –¢–ï–°–¢ 1: –°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ –≤ –æ—Ç–µ–ª–µ

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –Ω–æ–º–µ—Ä–æ–≤ –æ—Ç–µ–ª—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è ID=1 (Grand Plaza Hotel)
curl "http://localhost:3000/api/rooms?hotel_id=1&limit=20"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 200 OK
- –°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ —Å —Ç–∏–ø–∞–º–∏: Standard Single, Standard Double, Deluxe Suite, Presidential Suite
- –ù–æ–º–µ—Ä–∞: 101, 102, 103, 104, 105, 201, 202, 203, 204, 205, 301, 302, 303, 304, 305
- –ù–æ–º–µ—Ä 204 –≤ —Å—Ç–∞—Ç—É—Å–µ "maintenance"

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON
- ‚úÖ –ü–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ –Ω–æ–º–µ—Ä–∞ –æ—Ç–µ–ª—è
- ‚úÖ –í–∫–ª—é—á–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–ø–∞—Ö –Ω–æ–º–µ—Ä–æ–≤ –∏ —Ü–µ–Ω–∞—Ö

---

## üîç –¢–ï–°–¢ 2: –ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –Ω–∞ –ø–µ—Ä–∏–æ–¥

### –¶–µ–ª—å: –ù–∞–π—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã

```bash
# –ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ –Ω–∞ –∞–≤–≥—É—Å—Ç 2025
curl "http://localhost:3000/api/rooms/available?hotel_id=1&check_in_date=2025-08-20&check_out_date=2025-08-25&guest_count=2"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 200 OK
- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ —Å —Ü–µ–Ω–∞–º–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –ò—Å–∫–ª—é—á–µ–Ω—ã —É–∂–µ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞
- –ü–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä–∞ —Å –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é >= 2 –≥–æ—Å—Ç–µ–π

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Ç–∏–ø—É –Ω–æ–º–µ—Ä–∞
curl "http://localhost:3000/api/rooms/available?hotel_id=1&check_in_date=2025-09-10&check_out_date=2025-09-15&guest_count=1&room_type_id=3"
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç—ã—Ö –Ω–æ–º–µ—Ä–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≥–æ—Å—Ç–µ–π

---

## üìù –¢–ï–°–¢ 3: –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ (–æ–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)

### –¶–µ–ª—å: –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

```bash
# –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –æ–±—ã—á–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º
curl -X POST http://localhost:3000/api/bookings \
  -H "Content-Type: application/json" \
  -d '{
    "client_info": {
      "first_name": "Test",
      "last_name": "Customer",
      "email": "test.customer@example.com",
      "phone": "+1-555-1234"
    },
    "room_id": 4,
    "check_in_date": "2025-10-01",
    "check_out_date": "2025-10-05",
    "guest_count": 2,
    "special_requests": "Non-smoking room please"
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 201 Created
- –°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å UUID
- **–ù–µ—Ç VIP —Å–∫–∏–¥–∫–∏** (total_price = original_price)
- –ö–ª–∏–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ UUID –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤!**

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ü–æ–ª—É—á–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID
- ‚úÖ –¶–µ–Ω–∞ –±–µ–∑ —Å–∫–∏–¥–∫–∏
- ‚úÖ –ö–ª–∏–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–∞–∑–µ

---

## ‚≠ê –¢–ï–°–¢ 4: VIP –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º API

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VIP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º API

```bash
# –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ VIP –∫–ª–∏–µ–Ω—Ç–æ–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–∏–¥–∫–∞ 15%)
curl -X POST http://localhost:3000/api/bookings \
  -H "Content-Type: application/json" \
  -d '{
    "client_info": {
      "first_name": "VIP",
      "last_name": "Customer",
      "email": "vip1@example.com",
      "phone": "+1-555-9999"
    },
    "room_id": 5,
    "check_in_date": "2025-10-10",
    "check_out_date": "2025-10-15",
    "guest_count": 1,
    "special_requests": "VIP service requested"
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 201 Created
- **VIP —Å–∫–∏–¥–∫–∞ 15%** –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `vip_discount_applied: 15`
- `total_price` < `original_price`
- –≠–∫–æ–Ω–æ–º–∏—è ~15% –æ—Ç original_price

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—Ä—É–≥–∏—Ö VIP –∫–ª–∏–µ–Ω—Ç–æ–≤:**
```bash
# VIP Platinum –∫–ª–∏–µ–Ω—Ç (—Å–∫–∏–¥–∫–∞ 20%)
curl -X POST http://localhost:3000/api/bookings \
  -H "Content-Type: application/json" \
  -d '{
    "client_info": {
      "first_name": "Premium",
      "last_name": "Client", 
      "email": "premium@hotel.com"
    },
    "room_id": 6,
    "check_in_date": "2025-11-01",
    "check_out_date": "2025-11-05",
    "guest_count": 2
  }'
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ VIP —Å—Ç–∞—Ç—É—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π API
- ‚úÖ –°–∫–∏–¥–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (15% –∏–ª–∏ 20%)
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ VIP —Å—Ç–∞—Ç—É—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –±—Ä–æ–Ω—å
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üõ°Ô∏è –¢–ï–°–¢ 5: –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –¶–µ–ª—å: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —É–∂–µ –∑–∞–Ω—è—Ç—ã–π –Ω–æ–º–µ—Ä –∏ –ø–µ—Ä–∏–æ–¥
curl -X POST http://localhost:3000/api/bookings \
  -H "Content-Type: application/json" \
  -d '{
    "client_info": {
      "first_name": "Another",
      "last_name": "User",
      "email": "another@example.com"
    },
    "room_id": 4,
    "check_in_date": "2025-10-02",
    "check_out_date": "2025-10-04",
    "guest_count": 1
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- **HTTP 409 Conflict**
- –°–æ–æ–±—â–µ–Ω–∏–µ: "Room is already booked for the selected dates"
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–ï —Å–æ–∑–¥–∞–Ω–æ

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è –¥–∞—Ç—ã:**
```bash
# –ü–æ–ø—ã—Ç–∫–∞ —Å —á–∞—Å—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–º–∏—Å—è –¥–∞—Ç–∞–º–∏
curl -X POST http://localhost:3000/api/bookings \
  -H "Content-Type: application/json" \
  -d '{
    "client_info": {
      "first_name": "Test",
      "last_name": "Overlap",
      "email": "overlap@example.com"
    },
    "room_id": 4,
    "check_in_date": "2025-10-04",
    "check_out_date": "2025-10-06",
    "guest_count": 1
  }'
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –æ—à–∏–±–∫–∞ 409
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏—Ö—Å—è –ø–µ—Ä–∏–æ–¥–æ–≤

---

## ‚ùå –¢–ï–°–¢ 6: –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –¶–µ–ª—å: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–º–µ–Ω—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ UUID –∏–∑ –¢–ï–°–¢–ê 3)
curl "http://localhost:3000/api/bookings/YOUR_BOOKING_UUID"

# –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
curl -X DELETE "http://localhost:3000/api/bookings/YOUR_BOOKING_UUID/cancel" \
  -H "Content-Type: application/json" \
  -d '{
    "reason": "Plans changed - testing cancellation"
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 200 OK
- –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ "cancelled"
- –£–∫–∞–∑–∞–Ω–∞ –¥–∞—Ç–∞ –æ—Ç–º–µ–Ω—ã `cancelled_at`
- –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –æ—Ç–º–µ–Ω—ã:**
```bash
# –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–º–µ–Ω–∏—Ç—å —É–∂–µ –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
curl -X DELETE "http://localhost:3000/api/bookings/YOUR_BOOKING_UUID/cancel"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- HTTP 400 Bad Request
- –°–æ–æ–±—â–µ–Ω–∏–µ: "Only active bookings can be cancelled"

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —É–∂–µ –æ—Ç–º–µ–Ω–µ–Ω–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–º–µ–Ω—ã

---

## üìä –¢–ï–°–¢ 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 7.1 –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
```bash
curl "http://localhost:3000/api/bookings/stats"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö/–æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö/–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ VIP –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞
- –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–º–µ–Ω –∏ VIP –∫–ª–∏–µ–Ω—Ç–æ–≤

### 7.2 –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
```bash
curl "http://localhost:3000/api/bookings?limit=20"
```

### 7.3 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
```bash
# –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤
curl "http://localhost:3000/api/clients?limit=10"

# VIP –∫–ª–∏–µ–Ω—Ç—ã
curl "http://localhost:3000/api/clients?vip_only=true"
```

---

## üåê –¢–ï–°–¢ 8: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Swagger UI
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/api-docs
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª—é–±–æ–π endpoint –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
3. –ò–∑—É—á–∏—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API

### pgAdmin (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5050
2. –í–æ–π–¥–∏—Ç–µ: admin@hotel.com / admin
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î: host=db, user=hotel_user, password=hotel_password
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
SELECT b.*, c.first_name, c.last_name, c.is_vip, r.room_number 
FROM bookings b 
JOIN clients c ON b.client_id = c.id 
JOIN rooms r ON b.room_id = r.id 
ORDER BY b.created_at DESC;

-- VIP —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT 
  COUNT(*) as total_bookings,
  COUNT(CASE WHEN c.is_vip THEN 1 END) as vip_bookings,
  SUM(b.total_price) as total_revenue
FROM bookings b 
JOIN clients c ON b.client_id = c.id 
WHERE b.status = 'active';
```